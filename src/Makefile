CFLAGS = -std=c11 -Wall -Wextra -g -O2
CPPFLAGS = -I../include -DDEBUG
LDFLAGS =

all: generate_whitebox

whitebox: whitebox.o aes.o
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

generate_whitebox: main.o aes.o
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

main.o: main.c main.h aes.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

whitebox.o: whitebox.c aes.c aes.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

aes.o: aes.c aes.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

clean:
	@rm -f *.o generate_whitebox whitebox tables.h

help:
	@echo "Usage:"
	@echo " make [all]\t\tBuild the software"
	@echo " make clean\t\tRemove all files generated by make"
	@echo " make help\t\tDisplay this help"

.PHONY: all attack clean help